{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "../../App.svelte",
    "../../Collapse.svelte",
    "../../Nav.svelte",
    "../../Reference.svelte"
  ],
  "sourcesContent": [
    "<script>\n  import { prevent_default } from \"svelte/internal\";\n\n  import { onMount } from \"svelte\";\n\n  import Nav from \"./Nav.svelte\";\n  import Source from \"./Source.svelte\";\n  import { currentTitle, mainDoi } from \"./stores\";\n\n  onMount(() => {\n    getDoiFromUrl();\n    addEventListener(\"popstate\", getDoiFromUrl);\n  });\n\n  function getDoiFromUrl() {\n    const query = window.location.search;\n    const params = new URLSearchParams(query);\n    mainDoi.set(params.get(\"doi\"));\n  }\n</script>\n\n<style>\n  :global(:root) {\n    --shadow: rgba(150, 150, 150, 0.1);\n\n    --transition-time: 0.2s;\n  }\n\n  :global(*) {\n    font-family: sans-serif;\n  }\n\n  :global(body) {\n    padding: 0;\n  }\n\n  div {\n    background-color: #fdfdfd;\n  }\n\n  .invalid-doi {\n    text-align: center;\n  }\n\n  .invalid-doi div {\n    background-color: palegreen;\n    border-radius: 3px;\n    width: fit-content;\n    margin: 0 auto;\n  }\n</style>\n\n<svelte:head>\n  <title>Roam Crossref</title>\n  <meta name=\"description\" content=\"A utility to pull crossref.org data for papers and add it to RoamResearch\" />\n  <meta name=\"author\" content=\"Christian Fratta\" />\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n\n  <link\n    rel=\"stylesheet\"\n    href=\"https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css\"\n    integrity=\"sha512-NhSC1YmyruXifcj/KFRWoC561YpHpc5Jtzgvbuzx5VozKpWvQ+4nXhPdFgmx8xqexRcpAglTj9sIBWINXa8x5w==\"\n    crossorigin=\"anonymous\" />\n</svelte:head>\n\n<Nav title={$currentTitle} />\n<div>\n  {#if $mainDoi}\n    <Source bind:doi={$mainDoi} />\n  {:else}\n    <div class=\"invalid-doi\">\n      <b>Couldn't find the DOI. Make sure you're writing the iframe as</b>\n      <div>\n        <code>\n          &lbrace;&lbrace; iframe: https://equineontology.github.io/roam-crossref?doi=\n          <mark>YOUR_DOI_HERE</mark>\n          &rbrace;&rbrace;\n        </code>\n      </div>\n    </div>\n  {/if}\n</div>\n",
    "<script>\n  export let id;\n  export let titleOpen;\n  export let titleClosed;\n\n  let banner;\n  let isOpen = false;\n\n  function handleKeyDown(e) {\n    // 32 === spacebar\n    // 13 === enter\n    if (e.which === 32 || e.which === 13) {\n      e.preventDefault();\n      banner.click();\n    }\n  }\n</script>\n\n<style>\n  .collapse {\n    max-width: 100%;\n    margin-right: 10px;\n    margin-left: 10px;\n    width: fit-content;\n  }\n\n  .collapse__title {\n    background: #eee;\n    border: 1px solid #ccc;\n    border-radius: 8px;\n    box-shadow: 0px 5px 5px 0 var(--shadow);\n    color: black;\n    cursor: pointer;\n    display: block;\n    padding: 10px;\n    text-align: center;\n    transition-property: background, border-radius, box-shadow, transform;\n    transition-duration: var(--transition-time);\n  }\n\n  .collapse.isOpen .collapse__title {\n    border-radius: 10px 10px 0 0;\n    box-shadow: none;\n    transform: translateY(3px);\n  }\n\n  .collapse__title:hover {\n    background: #ddd;\n    box-shadow: none;\n    transform: translateY(3px);\n  }\n\n  .collapse__title::before {\n    content: \" \";\n    display: inline-block;\n    border-bottom: 5px solid transparent;\n    border-left: 5px solid currentColor;\n    border-top: 5px solid transparent;\n    margin-right: 10px;\n    transition: transform var(--transition-time);\n    vertical-align: middle;\n  }\n\n  input {\n    display: none;\n  }\n\n  .collapse.isOpen .collapse__title {\n    border-bottom-left-radius: 0;\n    border-bottom-right-radius: 0;\n  }\n\n  .collapse.isOpen .collapse__title::before {\n    transform: rotate(90deg) translateX(-3px);\n  }\n\n  .collapse__content-wrapper {\n    box-shadow: none;\n    max-height: 0;\n    overflow-y: hidden;\n    transition-property: box-shadow, max-height, transform;\n    transition-duration: var(--transition-time), 0.5s, var(--transition-time);\n    transition-timing-function: ease-in-out;\n  }\n\n  .collapse.isOpen .collapse__content-wrapper {\n    max-height: 90vh;\n  }\n\n  .collapse__content {\n    border-style: solid;\n    border-color: #ccc;\n    border-width: 0 1px 1px 1px;\n    border-bottom-left-radius: 7px;\n    border-bottom-right-radius: 7px;\n    color: black;\n    padding: 1rem;\n  }\n</style>\n\n<div class=\"collapse\" class:isOpen>\n  <input {id} type=\"checkbox\" bind:checked={isOpen} />\n  <label for={id} class=\"collapse__title\" tabindex=\"0\" bind:this={banner}>\n    <span>{isOpen ? titleOpen : titleClosed}</span>\n  </label>\n  <div class=\"collapse__content-wrapper\">\n    <div class=\"collapse__content\">\n      <slot />\n    </div>\n  </div>\n</div>\n",
    "<script>\n  export let title;\n</script>\n\n<style>\n  header {\n    background: #fff;\n    border-bottom: 1px solid rgba(3, 3, 3, 0.1);\n    box-shadow: 0 1px 10px 0 var(--shadow);\n    color: black;\n    padding: 10px;\n    position: sticky;\n    text-align: center;\n    text-transform: uppercase;\n    top: -1px;\n    z-index: 1;\n  }\n\n  h1 {\n    margin: 0;\n  }\n</style>\n\n<header>\n  <h1>{title}</h1>\n</header>\n",
    "<script>\n  import { onMount } from \"svelte\";\n  import { mainDoi } from \"./stores\";\n  import { crossrefCache } from \"./libs/crossrefCache\";\n\n  export let data;\n\n  const doi = data.DOI ?? null;\n  const key = data.key;\n  let text = data[\"volume-title\"] ?? data[\"journal-title\"] ?? doi ?? key;\n  const href = document.location.origin + document.location.pathname + `?doi=${doi}`;\n\n  onMount(() => {\n    if (doi) {\n      getSourceData();\n    }\n  });\n\n  async function getSourceData() {\n    const cachedData = crossrefCache.get(doi);\n    if (cachedData) {\n      text = cachedData.title[0] ?? text;\n      return;\n    }\n\n    const res = await fetch(`https://api.crossref.org/works/${doi}?mailto=christian.fratta@gmail.com`);\n    const jsonRes = await res.json();\n    const doiData = jsonRes.message;\n    crossrefCache.add(doi, doiData);\n\n    text = doiData.title[0] ?? text;\n  }\n\n  function handleClick(e) {\n    e.preventDefault();\n    history.pushState(\n      {\n        url: href,\n        title: text,\n      },\n      text,\n      href\n    );\n\n    mainDoi.set(doi);\n  }\n</script>\n\n<style>\n  li {\n    padding: 5px 0;\n  }\n\n  span {\n    color: gray;\n  }\n</style>\n\n<li>\n  {#if doi}<a {href} on:click={handleClick}>{text}</a>{:else}<span>{text}</span>{/if}\n</li>\n"
  ],
  "names": [],
  "mappings": "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"
}